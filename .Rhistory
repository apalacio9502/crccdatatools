devtools::document()
library(crccanalyticstools)
devtools::document()
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
install.packages(c("diffobj", "waiter"))
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
c("GE","CD","CV","C2","C7","C8","C9")
c("GE","CD","CV","C2","C7","C8","C9") %>% paste()
c("GE","CD","CV","C2","C7","C8","C9") %>% mutate()
paste0(c("GE","CD","CV","C2","C7","C8","C9") ,collapse = \"','\")
paste0(c("GE","CD","CV","C2","C7","C8","C9") ,collapse = \"','\")
paste0(c("GE","CD","CV","C2","C7","C8","C9") ,collapse = \"')
glue(paste0(c("GE","CD","CV","C2","C7","C8","C9") ,collapse = \"','\"))
paste0(c("GE","CD","CV","C2","C7","C8","C9") ,collapse = '\"','\"')
glue('{paste0(c("GE","CD","CV","C2","C7","C8","C9") ,collapse = \"','\")}')
prueba <- c("GE","CD","CV","C2","C7","C8","C9")
glue('{paste0(prueba ,collapse = \"','\")}')
glue("SEGMENTO_ID IN ('{paste0(prueba,collapse = \"','\")}')")
glue("SEGMENTO_ID IN ('{paste0(prueba,collapse = \"'%,'\")}')")
paste("%",prueba,"%")
paste0("%",prueba,"%")
prueba <- c("GE","CD","CV","C2","C7","C8","C9")
prueba <- paste0("%",prueba,"%")
glue("SEGMENTO_ID IN ('{paste0(prueba,collapse = \"' OR '\")}')")
prueba <- c("GE","CD","CV","C2","C7","C8","C9")
glue("AND SEGMENTO_ID IN ('{paste0(paste0(\"'%'\",prueba,\"'%'\"),collapse = \"' OR '\")}')")
glue("AND SEGMENTO_ID IN ('{paste0(paste0(\"%\",prueba,\"%\"),collapse = \"' OR '\")}')")
glue("AND SEGMENTO_ID LIKE ('{paste0(paste0(\"%\",prueba,\"%\"),collapse = \"' OR '\")}')")
# Se inicializa la variable
segmentos_analisis_sql <- ""
# Se verifica si segmentos_analisis es nulo
if (!is.null(segmentos_analisis)) {
# Se crea la variable segmentos_analisis_sql
segmentos_analisis_sql <- glue("AND SEGMENTOS LIKE ('{paste0(paste0(\"%\",segmentos_analisis,\"%\"),collapse = \"' OR '\")}')")
}
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
prueba <- c("c2","c3")
glue("AND SEGMENTOS LIKE ('{paste0(paste0(\"%\",prueba,\"%\"),collapse = \"' OR '\")}')")
glue("'{paste0(paste0(\"AND SEGMENTOS LIKE %\",prueba,\"%\"),collapse = \"' OR '\")}'")
glue("'{paste0(paste0(\"AND SEGMENTOS LIKE %\",prueba,\"%\"),collapse = \" OR \")}'")
glue("'{paste0(paste0(\"AND SEGMENTOS LIKE '%\",prueba,\"%'\"),collapse = \" OR \")}'")
prueba <- c()
glue("'{paste0(paste0(\"AND SEGMENTOS LIKE '%\",prueba,\"%'\"),collapse = \" OR \")}'")
prueba <- c("C2","C3")
glue("'{paste0(paste0(\"AND SEGMENTOS LIKE '%\",prueba,\"%'\"),collapse = \" OR \")}'")
glue("{paste0(paste0(\"AND SEGMENTOS LIKE '%\",prueba,\"%'\"),collapse = \" OR \")}")
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
numbers['.']
numbers['e']
strtoi("Alejandro", base=32L)
strtoi("Alejandro", base=36L)
strtoi("Alej", base=36L)
chartr("123456789", "ABCDEFGHI", x)
chartr("123456789", "ABCDEFGHI")
sapply(strsplit(paste(x),''), function(y) paste(LETTERS[as.numeric(y)], collapse = ''))
sapply(strsplit(paste("aqsa"),''), function(y) paste(LETTERS[as.numeric(y)], collapse = ''))
str_replace("1234")
letters
letters[1]
letters
a <- letters
a <- data.frame(LETRAS=letters) %>% mutate(NUMERO=row_number())
View(a)
str_replace("alala",a$LETRAS,a$NUMERO)
str_replace_all("alala",a$LETRAS,a$NUMERO)
str_order("alala")
str_order("alala")
str_sort("alala")
str_sort("alalass12")
str_sort("alalass12",decreasing = TRUE)
substitute.all <- function(pattern, replacement, x) {
idx <- match(x, pattern)
return(ifelse(is.na(idx), x, replacement[idx]))
}
substitute.all <- function(x,pattern, replacement) {
idx <- match(x, pattern)
return(ifelse(is.na(idx), x, replacement[idx]))
}
substitute.all("alala",a$LETRAS,a$NUMERO)
substitute.all("alala1234",a$LETRAS,a$NUMERO)
substitute.all <- function(x,pattern, replacement) {
idx <- match(x, pattern)
return(ifelse(is.na(idx), x, replacement[idx]))
}
substitute.all("alala1234",a$LETRAS,a$NUMERO)
substitute.all <- function(x,pattern, replacement) {
idx <- match(x, pattern)
return(ifelse(is.na(idx), x, replacement[idx]))
}
substitute.all("alala1234",a$LETRAS,a$NUMERO)
substitute.all("a","a","1")
substitute.all("alala1234",a$LETRAS,a$NUMERO)
substitute.all("a",a$LETRAS,a$NUMERO)
substitute.all("as",a$LETRAS,a$NUMERO)
substitute.all("as",a$LETRAS,1)
str_replace_all(string = "as",pattern = a$LETRAS,replacement = 1)
a <- data.frame(LETRAS=letters) %>% mutate(NUMERO=as.character(row_number()))
str_replace_all(string = "as",pattern = a$LETRAS,replacement = a$LETRAS)
str_replace_all(string = "a",pattern = a$LETRAS,replacement = a$LETRAS)
str_replace_all(string = "a",replacement = a$LETRAS,pattern = a$LETRAS)
str_replace_all(string = "a",replacement = "1",pattern = "a")
str_replace_all(string = "c",replacement = "1",pattern = "a")
str_replace_all(string = "ab",replacement = "1|2",pattern = "a|b")
str_replace_all(string = "ab",replacement = "12",pattern = "a|b")
str_replace_all(string = "ab",replacement = "1|2",pattern = "a|b")
str_replace_all(string = "ab",replacement = "1|2|3",pattern = "a|b|c")
str_replace_all(string = "ab",replacement = c("1","2"),pattern = "a|b|c")
str_replace_all(string = "a|b",replacement = c("1","2"),pattern = "a|b|c")
str_replace_all(string = "a|b",replacement = c("1","2"),pattern =  c("a","b"))
str_replace_all(string = "a",replacement = c("1","2"),pattern =  c("a","b"))
str_replace_all(string = c("a","b"),replacement = c("1","2"),pattern =  c("a","b"))
str_replace_all(string = c("a","b","a"),replacement = c("1","2"),pattern =  c("a","b"))
str_replace("fruits", "[aeiou]", c("1", "2", "3")
str_replace("fruits", "[aeiou]", c("1", "2", "3"))
str_replace_all("fruits",c("one" = "1", "two" = "2", "three" = "3"))
str_replace_all("fruits",c("a" = "1", "two" = "2", "three" = "3"))
str_replace_all("fruits",c("a" = "1", "f" = "2", "three" = "3"))
str_replace_all("fruits",c("a" = "1", "f" = "2", "c" = "3"))
str_replace_all("fruits",c("a" = "1", "f" = "2", "t" = "3"))
c("a" = "1", "f" = "2", "t" = "3")
class(c("a" = "1", "f" = "2", "t" = "3"))
a %>% as.character()
a %>% as.list()
str_replace_all("fruits",a %>% as.list())
a %>% as.vector()
a
str_replace_all("fruits",a %>% as.vector())
str_replace_all("fruits",c("a=1"))
str_replace_all("fruits",c("a"="1"))
str_replace_all("fruits",c('"a"="1"'))
c("a"="1")
a <- c("a"="1")
str_replace_all("fruits",letters)
a <- c("a"="1","B"="1")
a <- c("a"="1","B"="1")
a
a <- data.frame(LETRAS=letters) %>% mutate(NUMERO=as.character(row_number()))
c(a$LETRAS=a$NUMERO)
c(a$LETRAS = a$NUMERO)
c(a$NUMERO)
conversor=c(a$NUMERO)
names(a$LETRAS)
conversor=c(a$NUMERO)
names(a$LETRAS)
names(conversor))=a$LETRAS
conversor=a$NUMERO
names(conversor))=a$LETRAS
names(conversor)=a$LETRAS
conversor
str_replace_all("fruits",conversor)
str_replace_all("Fruits",conversor)
letters
letters %>% names("a")
conversor=c(1:length(letters))
names(conversor)=letters
conversor
dt_vector_numeros_letras <- function(){
conversor=c(1:length(letters))
names(conversor)=letters
return(conversor)
}
dt_vector_numeros_letras()
devtools::document()
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
str_to_upper("cuenta_garantia_titular_seudonimo")
devtools::document()
devtools::document()
library(crccanalyticstools)
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
install.packages(c("backports", "cli", "tzdb"))
install.packages(c("backports", "cli", "tzdb"))
install.packages(c("backports", "cli", "tzdb"))
install.packages(c("backports", "cli", "tzdb"))
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
cars
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
shiny::runApp('~/crcc-analytics/nuevo/app_home')
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
# Se cargan las librerias
library(crccanalyticstools)
library(blastula)
# Parámetros
# Se define la ruta de trabajo server
#ruta <- "/home/csanalytics/crcc-analytics/back_end/informes"
# Se define la ruta de trabajo Windows
ruta <- "/Users/alejandropalacio/sourcetree/crcc-analytics/back_end/informes"
ruta <- "C:/Users/apalacio/Documents/crcc-analytics/back_end/informes"
# Se define la config
config <- suppressWarnings(config::get("crcc_analytics_desarrollo_2",file = file.path(ruta,"configuracion","config.yml"),use_parent = FALSE))
# Se define la config
config <- suppressWarnings(config::get("bodega_3",file = file.path(ruta,"configuracion","config.yml"),use_parent = FALSE))
# Se define la fecha_ejecucion
fecha_ejecucion <- ymd(Sys.Date(),tz="America/Bogota")
# Se define la fecha_informe
source(file.path(ruta,"configuracion","fecha_informe.R"),local = TRUE)
# Se define la fecha_informe
source(file.path(ruta,"configuracion","fecha_informe.R"),local = TRUE)
# Se crea el mensaje ** Inicio ejecución gen_informe_diario.R
message("** Inicio ejecución gen_informe_diario.R ",Sys.time())
# Parámetros
# Se define la variable ruta_informe
ruta_informe <- file.path(ruta,"gen_informe_diario")
# Se define la variable periodo_analisis
periodo_analisis <- c(floor_date(fecha_informe$FECHA[1],unit = "month")-months(5),  fecha_informe$FECHA[1])
periodo_analisis <- c(floor_date(fecha_informe$FECHA[1],unit = "year"),  fecha_informe$FECHA[1])
# Se define la variable ficticio
ficticio <- FALSE
# Se crea el mensaje *** Inicio descarga datos
message("*** Inicio descarga datos ",Sys.time())
# Se crea la conexión con la bodega de datos
conexion <- dt_abrir_conexion(config)
# Descarga datos colores
colores <- dt_colores(conexion)
# Descarga datos colores
colores <- dt_adm_colores(conexion)
# Descarga datos colores
colores <- dt_adm_gen_colores(conexion)
# Descarga datos gen_ing_resumen
gen_ing_resumen_periodo <- dt_gen_ing_resumen(conexion=conexion,periodo_analisis =periodo_analisis,ficticio = ficticio)
# Descarga datos gen_ing_resumen
gen_ing_resumen_periodo <- dt_gen_ing_resumen(conexion=conexion,periodo_analisis =periodo_analisis,seudonimo = seudonimo)
# Se define la variable seudonimo
seudonimo <- "REAL"
# Descarga datos gen_ing_resumen
gen_ing_resumen_periodo <- dt_gen_ing_resumen(conexion=conexion,periodo_analisis =periodo_analisis,seudonimo = seudonimo)
# Se crea el dataframe gen_ing_resumen_fecha
gen_ing_resumen_fecha <- dt_filtro_datos(datos=gen_ing_resumen_periodo,fecha_analisis =periodo_analisis[2])
# Descarga datos gen_vol_resumen
gen_vol_resumen_periodo <- dt_gen_vol_resumen(conexion=conexion,periodo_analisis =periodo_analisis,seudonimo = seudonimo)
# Se crea el dataframe gen_vol_resumen_fecha
gen_vol_resumen_fecha <- dt_filtro_datos(datos=gen_vol_resumen_periodo,fecha_analisis =periodo_analisis[2])
# Descarga datos gen_posicion_abierta_resumen
gen_pa_resumen_periodo <- dt_gen_pa_resumen(conexion=conexion,periodo_analisis =periodo_analisis,seudonimo = seudonimo)
# Se crea el dataframe gen_pa_resumen_fecha
gen_pa_resumen_fecha <- dt_filtro_datos(datos=gen_pa_resumen_periodo,fecha_analisis =periodo_analisis[2])
# Descarga datos gen_gar_dep_exi_periodo
gen_gar_dep_exi_periodo <- dt_gen_gar_dep_exi(conexion=conexion,periodo_analisis =periodo_analisis,seudonimo = seudonimo)
# Se crea el dataframe gen_gar_dep_exi_fecha
gen_gar_dep_exi_fecha <- dt_filtro_datos(datos=gen_gar_dep_exi_periodo,fecha_analisis =periodo_analisis[2])
# Descarga datos gen_gar_dep_exi_liq_fecha
gen_gar_dep_exi_liq_fecha <- dt_gen_gar_dep_exi_liq(conexion=conexion,fecha_analisis =periodo_analisis[2],seudonimo = seudonimo)
# Descarga datos gen_gar_ggl_ind_fgc_liq_fecha
gen_gar_ggl_ind_fgc_liq_fecha <- dt_gen_gar_ggl_ind_fgc_liq(conexion=conexion,fecha_analisis =periodo_analisis[2],seudonimo = seudonimo)
# Descarga datos dv_indicador_liquidez_fecha
dv_indicador_liquidez_fecha <- dt_dv_indicador_liquidez(conexion=conexion,fecha_analisis =periodo_analisis[2],seudonimo = seudonimo)
# Descarga datos dv_liq_resumen_periodo
dv_liq_resumen_periodo <- dt_dv_liq_resumen(conexion=conexion,periodo_analisis =periodo_analisis,seudonimo = seudonimo)
# Se crea el dataframe dv_liq_resumen_fecha
dv_liq_resumen_fecha <- dt_filtro_datos(datos=dv_liq_resumen_periodo,fecha_analisis =periodo_analisis[2])
# Descarga datos gen_rss_promedio_periodo
gen_rss_promedio_periodo <- dt_gen_rss_promedio(conexion=conexion,periodo_analisis =periodo_analisis,seudonimo = seudonimo)
# Se crea el dataframe gen_rss_test_fgc_periodo
gen_rss_test_fgc_periodo <- dt_gen_rss_test_fgc(conexion=conexion,periodo_analisis =periodo_analisis,seudonimo = seudonimo)
# Se cierra la conexion
dbDisconnect(conexion)
# Se elimina la conexion
rm(conexion)
# Se crea el mensaje *** Inicio generación informe
message("*** Inicio generación informe ",Sys.time())
# Se define el nombre del archivo html
nombre_archivo_html <- paste0(paste("Informe Diario",periodo_analisis[2]),".html")
# Se cargan los parametros del RMarkdown
parametros <- list(periodo_analisis=periodo_analisis,
colores=colores,
gen_ing_resumen_periodo=gen_ing_resumen_periodo,
gen_ing_resumen_fecha=gen_ing_resumen_fecha,
gen_vol_resumen_periodo=gen_vol_resumen_periodo,
gen_vol_resumen_fecha=gen_vol_resumen_fecha,
gen_pa_resumen_periodo=gen_pa_resumen_periodo,
gen_pa_resumen_fecha=gen_pa_resumen_fecha,
gen_gar_dep_exi_periodo=gen_gar_dep_exi_periodo,
gen_gar_dep_exi_fecha=gen_gar_dep_exi_fecha,
gen_gar_dep_exi_liq_fecha=gen_gar_dep_exi_liq_fecha,
gen_gar_ggl_ind_fgc_liq_fecha=gen_gar_ggl_ind_fgc_liq_fecha,
dv_indicador_liquidez_fecha=dv_indicador_liquidez_fecha,
dv_liq_resumen_periodo=dv_liq_resumen_periodo,
dv_liq_resumen_fecha=dv_liq_resumen_fecha,
gen_rss_promedio_periodo=gen_rss_promedio_periodo,
gen_rss_test_fgc_periodo=gen_rss_test_fgc_periodo)
# Se renderiza el RMarkdown
rmarkdown::render(file.path(ruta_informe,"RMarkdown/gen_informe_diario.Rmd"),
output_dir =file.path(ruta_informe, "repositorio") ,
output_file =nombre_archivo_html, clean = TRUE,params = parametros,
envir = new.env(parent = globalenv()),
quiet = TRUE)
install.packages(c("brio", "cpp11", "devtools", "digest", "fs", "glue", "odbc", "pkgbuild", "pkgload", "readr", "remotes", "vroom", "withr", "xml2"))
paste0("ASAS","asa",sep="-")
paste("ASAS",sep="-")
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
131*34
28/4454
1-28/4454
229*34
6+6+5+4+4+3+3+3+2+2+2+8
48/7786
devtools::document()
library(crccanalyticstools)
devtools::document()
library(crccanalyticstools)
